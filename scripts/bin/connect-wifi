#!/bin/sh

set -exou
# A UI for choosing WIFI SSID to connect and enter passcode if needed

source "${HOME}/.local/share/scripts/bemenu"

ssid=$(nmcli device wifi list | awk '{ if ($1 == "*") print $3; else if ($2 == "--" || $2 == "IN-USE") next; else print $2; }' | _bemenu -l 20 -p "Choose SSID to connect")
echo -n "Passcode to join WIFI $ssid: "
read passcode
nmcli device wifi connect $ssid password $passcode
